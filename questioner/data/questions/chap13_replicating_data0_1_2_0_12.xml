<?xml version="1.0" encoding="UTF-8"?>
<questions id="0_1_2_0_12" name="chap13_Replicating_Data" nofquestions="1" nofsubcategories="0" filename="chap13_replicating_data0_1_2_0_12.xml">
  <question id="0_1_2_0_12:0" type="2">
    <questiontext>&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;What&amp;nbsp;is&amp;nbsp;replication&amp;nbsp;process&amp;nbsp;?&amp;nbsp;What&amp;nbsp;kind&amp;nbsp;of&amp;nbsp;replication&amp;nbsp;do&amp;nbsp;you&amp;nbsp;know&amp;nbsp;&amp;nbsp;?&lt;br&gt;
Describe&amp;nbsp;replication&amp;nbsp;in&amp;nbsp;MySQL.&lt;br&gt;
&amp;nbsp;&amp;nbsp;</questiontext>
    <questionanswer>http://en.wikipedia.org/wiki/Replication_(computing)&lt;br&gt;
&lt;br&gt;
Replication&amp;nbsp;in&amp;nbsp;MySQL&amp;nbsp;is&amp;nbsp;the&amp;nbsp;dynamic&amp;nbsp;process&amp;nbsp;of&amp;nbsp;synchronizing&amp;nbsp;data&amp;nbsp;between&amp;nbsp;a&amp;nbsp;primary&lt;br&gt;
(master)&amp;nbsp;database&amp;nbsp;server&amp;nbsp;and&amp;nbsp;one&amp;nbsp;or&amp;nbsp;more&amp;nbsp;secondary&amp;nbsp;(slave)&amp;nbsp;database&amp;nbsp;servers&amp;nbsp;in&amp;nbsp;near-real&lt;br&gt;
time.&amp;nbsp;Using&amp;nbsp;this&amp;nbsp;process,&amp;nbsp;it’s&amp;nbsp;possible&amp;nbsp;to&amp;nbsp;create&amp;nbsp;copies&amp;nbsp;of&amp;nbsp;one&amp;nbsp;or&amp;nbsp;more&amp;nbsp;databases&amp;nbsp;so&amp;nbsp;that&amp;nbsp;even&lt;br&gt;
if&amp;nbsp;the&amp;nbsp;primary&amp;nbsp;server&amp;nbsp;fails,&amp;nbsp;data&amp;nbsp;can&amp;nbsp;still&amp;nbsp;be&amp;nbsp;recovered&amp;nbsp;from&amp;nbsp;one&amp;nbsp;of&amp;nbsp;the&amp;nbsp;secondary&amp;nbsp;servers.&lt;br&gt;
&lt;br&gt;
!!!Tip&amp;nbsp;:&amp;nbsp;As&amp;nbsp;much&amp;nbsp;as&amp;nbsp;possible,&amp;nbsp;try&amp;nbsp;to&amp;nbsp;use&amp;nbsp;the&amp;nbsp;same&amp;nbsp;version&amp;nbsp;of&amp;nbsp;MySQL&amp;nbsp;for&amp;nbsp;both&amp;nbsp;the&amp;nbsp;master&amp;nbsp;and&amp;nbsp;slave&lt;br&gt;
server(s).&amp;nbsp;A&amp;nbsp;version&amp;nbsp;mismatch&amp;nbsp;can&amp;nbsp;sometimes&amp;nbsp;result&amp;nbsp;in&amp;nbsp;erratic&amp;nbsp;replication&amp;nbsp;behavior.&lt;br&gt;
&lt;br&gt;
Why&amp;nbsp;replication?&amp;nbsp;There&amp;nbsp;are&amp;nbsp;four&amp;nbsp;common&amp;nbsp;reasons.&lt;br&gt;
&lt;br&gt;
-&amp;nbsp;&amp;nbsp;To&amp;nbsp;create&amp;nbsp;a&amp;nbsp;standby&amp;nbsp;database&amp;nbsp;server.&amp;nbsp;If&amp;nbsp;the&amp;nbsp;primary&amp;nbsp;server&amp;nbsp;fails,&amp;nbsp;the&amp;nbsp;standby&amp;nbsp;can&lt;br&gt;
step&amp;nbsp;in,&amp;nbsp;take&amp;nbsp;over,&amp;nbsp;and&amp;nbsp;immediately&amp;nbsp;be&amp;nbsp;current.&amp;nbsp;For&amp;nbsp;any&amp;nbsp;organization&amp;nbsp;that&amp;nbsp;has&lt;br&gt;
mission-critical,&amp;nbsp;time-sensitive&amp;nbsp;tasks&amp;nbsp;involving&amp;nbsp;its&amp;nbsp;database,&amp;nbsp;this&amp;nbsp;is&amp;nbsp;a&amp;nbsp;must!&lt;br&gt;
-&amp;nbsp;&amp;nbsp;To&amp;nbsp;enable&amp;nbsp;backups&amp;nbsp;without&amp;nbsp;having&amp;nbsp;to&amp;nbsp;bring&amp;nbsp;down&amp;nbsp;or&amp;nbsp;lock&amp;nbsp;out&amp;nbsp;the&amp;nbsp;master&amp;nbsp;server.&lt;br&gt;
After&amp;nbsp;replication&amp;nbsp;takes&amp;nbsp;place,&amp;nbsp;backups&amp;nbsp;are&amp;nbsp;done&amp;nbsp;on&amp;nbsp;the&amp;nbsp;slave,&amp;nbsp;rather&amp;nbsp;than&amp;nbsp;on&amp;nbsp;the&lt;br&gt;
master.&amp;nbsp;This&amp;nbsp;way,&amp;nbsp;the&amp;nbsp;master&amp;nbsp;can&amp;nbsp;be&amp;nbsp;left&amp;nbsp;to&amp;nbsp;do&amp;nbsp;its&amp;nbsp;job&amp;nbsp;without&amp;nbsp;disturbance.&lt;br&gt;
-&amp;nbsp;&amp;nbsp;To&amp;nbsp;keep&amp;nbsp;data&amp;nbsp;current&amp;nbsp;across&amp;nbsp;multiple&amp;nbsp;locations.&amp;nbsp;Replication&amp;nbsp;is&amp;nbsp;necessary&amp;nbsp;if&lt;br&gt;
several&amp;nbsp;branches&amp;nbsp;of&amp;nbsp;an&amp;nbsp;organization&amp;nbsp;need&amp;nbsp;to&amp;nbsp;work&amp;nbsp;from&amp;nbsp;a&amp;nbsp;current&amp;nbsp;copy&amp;nbsp;of&amp;nbsp;the&lt;br&gt;
same&amp;nbsp;database.&lt;br&gt;
-&amp;nbsp;&amp;nbsp;To&amp;nbsp;balance&amp;nbsp;the&amp;nbsp;workload&amp;nbsp;of&amp;nbsp;multiple&amp;nbsp;servers.&amp;nbsp;By&amp;nbsp;making&amp;nbsp;it&amp;nbsp;possible&amp;nbsp;to&amp;nbsp;create&lt;br&gt;
mirror&amp;nbsp;images&amp;nbsp;of&amp;nbsp;one&amp;nbsp;database&amp;nbsp;on&amp;nbsp;multiple&amp;nbsp;servers,&amp;nbsp;replication&amp;nbsp;can&amp;nbsp;help&amp;nbsp;alleviate&lt;br&gt;
the&amp;nbsp;woes&amp;nbsp;of&amp;nbsp;a&amp;nbsp;single&amp;nbsp;overloaded&amp;nbsp;database&amp;nbsp;server&amp;nbsp;by&amp;nbsp;splitting&amp;nbsp;queries&amp;nbsp;between&lt;br&gt;
multiple&amp;nbsp;servers,&amp;nbsp;each&amp;nbsp;running&amp;nbsp;on&amp;nbsp;separate&amp;nbsp;hardware.&lt;br&gt;
&lt;br&gt;
=========================================================&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Kinds&amp;nbsp;of&amp;nbsp;replication&amp;nbsp;&lt;br&gt;
-&amp;nbsp;The&amp;nbsp;Master-Slave&amp;nbsp;Relationship&lt;br&gt;
-&amp;nbsp;The&amp;nbsp;Master-Master&amp;nbsp;Relationship&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Replication&amp;nbsp;Methods&amp;nbsp;(!&amp;nbsp;IMPORTANT)&lt;br&gt;
MySQL&amp;nbsp;supports&amp;nbsp;two&amp;nbsp;(or&amp;nbsp;three,&amp;nbsp;depending&amp;nbsp;on&amp;nbsp;how&amp;nbsp;you&amp;nbsp;look&amp;nbsp;at&amp;nbsp;it)&amp;nbsp;different&amp;nbsp;methods&amp;nbsp;of&lt;br&gt;
replicating&amp;nbsp;databases&amp;nbsp;from&amp;nbsp;master&amp;nbsp;to&amp;nbsp;slave.&amp;nbsp;All&amp;nbsp;of&amp;nbsp;these&amp;nbsp;methods&amp;nbsp;use&amp;nbsp;the&amp;nbsp;binary&amp;nbsp;log;&lt;br&gt;
however,&amp;nbsp;they&amp;nbsp;differ&amp;nbsp;in&amp;nbsp;the&amp;nbsp;type&amp;nbsp;of&amp;nbsp;data&amp;nbsp;that&amp;nbsp;is&amp;nbsp;written&amp;nbsp;to&amp;nbsp;the&amp;nbsp;master’s&amp;nbsp;binary&amp;nbsp;log.&lt;br&gt;
-&amp;nbsp;Statement-based&amp;nbsp;replication&amp;nbsp;Under&amp;nbsp;this&amp;nbsp;method,&amp;nbsp;the&amp;nbsp;binary&amp;nbsp;log&amp;nbsp;stores&amp;nbsp;the&lt;br&gt;
SQL&amp;nbsp;statements&amp;nbsp;used&amp;nbsp;to&amp;nbsp;change&amp;nbsp;databases&amp;nbsp;on&amp;nbsp;the&amp;nbsp;master&amp;nbsp;server.&amp;nbsp;The&amp;nbsp;slave&amp;nbsp;reads&lt;br&gt;
this&amp;nbsp;data&amp;nbsp;and&amp;nbsp;reexecutes&amp;nbsp;these&amp;nbsp;SQL&amp;nbsp;statements&amp;nbsp;to&amp;nbsp;produce&amp;nbsp;a&amp;nbsp;copy&amp;nbsp;of&amp;nbsp;the&amp;nbsp;master&lt;br&gt;
database.&amp;nbsp;This&amp;nbsp;is&amp;nbsp;the&amp;nbsp;default&amp;nbsp;replication&amp;nbsp;method&amp;nbsp;in&amp;nbsp;MySQL&amp;nbsp;5.1.11&amp;nbsp;and&amp;nbsp;earlier&amp;nbsp;and&lt;br&gt;
MySQL&amp;nbsp;5.1.29&amp;nbsp;onwards.&lt;br&gt;
-&amp;nbsp;Row-based&amp;nbsp;replication&amp;nbsp;Under&amp;nbsp;this&amp;nbsp;method,&amp;nbsp;the&amp;nbsp;binary&amp;nbsp;log&amp;nbsp;stores&amp;nbsp;the&amp;nbsp;recordlevel&lt;br&gt;
changes&amp;nbsp;that&amp;nbsp;occur&amp;nbsp;to&amp;nbsp;database&amp;nbsp;tables&amp;nbsp;on&amp;nbsp;the&amp;nbsp;master&amp;nbsp;server.&amp;nbsp;The&amp;nbsp;slave&amp;nbsp;reads&lt;br&gt;
this&amp;nbsp;data&amp;nbsp;and&amp;nbsp;manipulates&amp;nbsp;its&amp;nbsp;records&amp;nbsp;accordingly&amp;nbsp;to&amp;nbsp;produce&amp;nbsp;a&amp;nbsp;copy&amp;nbsp;of&amp;nbsp;the&lt;br&gt;
master&amp;nbsp;database.&lt;br&gt;
-&amp;nbsp;Mixed-format&amp;nbsp;replication&amp;nbsp;Under&amp;nbsp;this&amp;nbsp;method,&amp;nbsp;the&amp;nbsp;server&amp;nbsp;can&amp;nbsp;dynamically&lt;br&gt;
choose&amp;nbsp;between&amp;nbsp;statement-based&amp;nbsp;replication&amp;nbsp;and&amp;nbsp;row-based&amp;nbsp;replication,&lt;br&gt;
depending&amp;nbsp;on&amp;nbsp;certain&amp;nbsp;conditions.&amp;nbsp;Some&amp;nbsp;of&amp;nbsp;these&amp;nbsp;conditions&amp;nbsp;include&amp;nbsp;using&amp;nbsp;a&amp;nbsp;userdefined&lt;br&gt;
function&amp;nbsp;(UDF),&amp;nbsp;using&amp;nbsp;an&amp;nbsp;INSERT&amp;nbsp;command&amp;nbsp;with&amp;nbsp;the&amp;nbsp;DELAYED&amp;nbsp;clause,&lt;br&gt;
using&amp;nbsp;temporary&amp;nbsp;tables,&amp;nbsp;or&amp;nbsp;using&amp;nbsp;a&amp;nbsp;statement&amp;nbsp;that&amp;nbsp;uses&amp;nbsp;system&amp;nbsp;variables.&amp;nbsp;This&amp;nbsp;is&lt;br&gt;
the&amp;nbsp;default&amp;nbsp;replication&amp;nbsp;method&amp;nbsp;in&amp;nbsp;MySQL&amp;nbsp;5.1.12&amp;nbsp;to&amp;nbsp;MySQL&amp;nbsp;5.1.28.&lt;br&gt;
&lt;br&gt;
server&amp;nbsp;variable.&lt;br&gt;
mysql&gt;&amp;nbsp;SHOW&amp;nbsp;VARIABLES&amp;nbsp;LIKE&amp;nbsp;'binlog_format';&lt;br&gt;
+---------------+-----------+&lt;br&gt;
|&amp;nbsp;Variable_name&amp;nbsp;|&amp;nbsp;Value&amp;nbsp;|&lt;br&gt;
+---------------+-----------+&lt;br&gt;
|&amp;nbsp;binlog_format&amp;nbsp;|&amp;nbsp;STATEMENT&amp;nbsp;|&lt;br&gt;
+---------------+-----------+&lt;br&gt;
1&amp;nbsp;row&amp;nbsp;in&amp;nbsp;set&amp;nbsp;(0.08&amp;nbsp;sec)&lt;br&gt;
&lt;br&gt;
==========================================================&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Replication&amp;nbsp;process&amp;nbsp;in&amp;nbsp;MySQL&lt;br&gt;
&lt;br&gt;
Configuring&amp;nbsp;Master-Slave&amp;nbsp;Replication&lt;br&gt;
&lt;br&gt;
1)&amp;nbsp;On&amp;nbsp;master&amp;nbsp;my.cnf&lt;br&gt;
(Master&amp;nbsp;server)&lt;br&gt;
[mysqld]&lt;br&gt;
server-id&amp;nbsp;=&amp;nbsp;10&lt;br&gt;
log-bin&amp;nbsp;=&amp;nbsp;mysql-bin&lt;br&gt;
replicate-do-db&amp;nbsp;=&amp;nbsp;db1&lt;br&gt;
&lt;br&gt;
2)&amp;nbsp;Create&amp;nbsp;user&amp;nbsp;db1-slave&amp;nbsp;,&amp;nbsp;and&amp;nbsp;give&amp;nbsp;him&amp;nbsp;permissions&amp;nbsp;to&amp;nbsp;db1&amp;nbsp;,&amp;nbsp;and&amp;nbsp;ensure&amp;nbsp;this&amp;nbsp;user&amp;nbsp;can&amp;nbsp;connect&amp;nbsp;from&amp;nbsp;remote&amp;nbsp;&lt;br&gt;
host&lt;br&gt;
&lt;br&gt;
3)&amp;nbsp;The&amp;nbsp;next&amp;nbsp;step&amp;nbsp;is&amp;nbsp;to&amp;nbsp;copy&amp;nbsp;the&amp;nbsp;database&amp;nbsp;from&amp;nbsp;the&amp;nbsp;master&amp;nbsp;server&amp;nbsp;to&amp;nbsp;the&amp;nbsp;slave.&amp;nbsp;As&lt;br&gt;
previously&amp;nbsp;mentioned,&amp;nbsp;you&amp;nbsp;must&amp;nbsp;start&amp;nbsp;with&amp;nbsp;an&amp;nbsp;exact&amp;nbsp;duplicate&amp;nbsp;to&amp;nbsp;assure&amp;nbsp;proper&lt;br&gt;
replication.&lt;br&gt;
Before&amp;nbsp;doing&amp;nbsp;this,&amp;nbsp;you&amp;nbsp;need&amp;nbsp;to&amp;nbsp;determine&amp;nbsp;the&amp;nbsp;current&amp;nbsp;position&amp;nbsp;of&amp;nbsp;the&amp;nbsp;master&lt;br&gt;
server’s&amp;nbsp;binary&amp;nbsp;log&amp;nbsp;by&amp;nbsp;running&amp;nbsp;the&amp;nbsp;SHOW&amp;nbsp;MASTER&amp;nbsp;STATUS&amp;nbsp;command&amp;nbsp;on&amp;nbsp;the&lt;br&gt;
master&amp;nbsp;server&lt;br&gt;
&lt;br&gt;
(Master&amp;nbsp;server)&lt;br&gt;
mysql&gt;&amp;nbsp;FLUSH&amp;nbsp;TABLES&amp;nbsp;WITH&amp;nbsp;READ&amp;nbsp;LOCK;&lt;br&gt;
Query&amp;nbsp;OK,&amp;nbsp;0&amp;nbsp;rows&amp;nbsp;affected&amp;nbsp;(0.00&amp;nbsp;sec)&lt;br&gt;
mysql&gt;&amp;nbsp;SHOW&amp;nbsp;MASTER&amp;nbsp;STATUS;&lt;br&gt;
+------------------+----------+--------------+------------------+&lt;br&gt;
|&amp;nbsp;File&amp;nbsp;|&amp;nbsp;Position&amp;nbsp;|&amp;nbsp;Binlog_Do_DB&amp;nbsp;|&amp;nbsp;Binlog_Ignore_DB&amp;nbsp;|&lt;br&gt;
+------------------+----------+--------------+------------------+&lt;br&gt;
|&amp;nbsp;mysql-bin.000001&amp;nbsp;|&amp;nbsp;106&amp;nbsp;|&amp;nbsp;|&amp;nbsp;|&lt;br&gt;
+------------------+----------+--------------+------------------+&lt;br&gt;
1&amp;nbsp;row&amp;nbsp;in&amp;nbsp;set&amp;nbsp;(0.00&amp;nbsp;sec)&lt;br&gt;
&lt;br&gt;
(Master&amp;nbsp;server)&lt;br&gt;
[user@cerberus]#&amp;nbsp;/usr/local/mysql/bin/mysqldump&amp;nbsp;--user=root&lt;br&gt;
--password=guessme&amp;nbsp;db1&amp;nbsp;&gt;&amp;nbsp;/tmp/db1.sql&lt;br&gt;
&lt;br&gt;
mysql&gt;&amp;nbsp;UNLOCK&amp;nbsp;TABLES;&lt;br&gt;
Query&amp;nbsp;OK,&amp;nbsp;0&amp;nbsp;rows&amp;nbsp;affected&amp;nbsp;(0.00&amp;nbsp;sec)&lt;br&gt;
&lt;br&gt;
4)&amp;nbsp;Next,&amp;nbsp;copy&amp;nbsp;the&amp;nbsp;exported&amp;nbsp;database&amp;nbsp;to&amp;nbsp;the&amp;nbsp;slave&amp;nbsp;server&amp;nbsp;using&amp;nbsp;the&amp;nbsp;mysql&amp;nbsp;command&lt;br&gt;
&lt;br&gt;
(Slave&amp;nbsp;server)&lt;br&gt;
mysql&gt;&amp;nbsp;CREATE&amp;nbsp;DATABASE&amp;nbsp;db1;&lt;br&gt;
Query&amp;nbsp;OK,&amp;nbsp;1&amp;nbsp;row&amp;nbsp;affected&amp;nbsp;(0.00&amp;nbsp;sec)&lt;br&gt;
[user@cerberus]#&amp;nbsp;/usr/local/mysql/bin/mysql&amp;nbsp;--user=root&lt;br&gt;
&amp;nbsp;--password=root&amp;nbsp;db1&amp;nbsp;&lt;&amp;nbsp;/tmp/db1.sql&lt;br&gt;
&lt;br&gt;
5)&amp;nbsp;Configure&amp;nbsp;slave&amp;nbsp;server&amp;nbsp;&lt;br&gt;
(Slave&amp;nbsp;server)&lt;br&gt;
[mysqld]&lt;br&gt;
server-id&amp;nbsp;=&amp;nbsp;7&lt;br&gt;
&lt;br&gt;
6)&amp;nbsp;On&amp;nbsp;slave&amp;nbsp;server&amp;nbsp;in&amp;nbsp;mysql&amp;nbsp;console&amp;nbsp;:&amp;nbsp;&lt;br&gt;
(Slave&amp;nbsp;server)&lt;br&gt;
mysql&gt;&amp;nbsp;CHANGE&amp;nbsp;MASTER&amp;nbsp;TO&lt;br&gt;
-&gt;&amp;nbsp;MASTER_HOST='192.168.0.103',&lt;br&gt;
-&gt;&amp;nbsp;MASTER_USER='db1-slave',&lt;br&gt;
-&gt;&amp;nbsp;MASTER_PASSWORD='rosebud',&lt;br&gt;
-&gt;&amp;nbsp;MASTER_LOG_FILE='mysql-bin.000001',&lt;br&gt;
-&gt;&amp;nbsp;MASTER_LOG_POS=106;&amp;nbsp;&amp;nbsp;--&amp;nbsp;it&amp;nbsp;is&amp;nbsp;position&amp;nbsp;from&amp;nbsp;master&amp;nbsp;!!!!!!&lt;br&gt;
&lt;br&gt;
7)&amp;nbsp;ON&amp;nbsp;slave&amp;nbsp;&lt;br&gt;
mysql&gt;&amp;nbsp;START&amp;nbsp;SLAVE;&lt;br&gt;
&lt;br&gt;
8)&amp;nbsp;To&amp;nbsp;see&amp;nbsp;if&amp;nbsp;there&amp;nbsp;are&amp;nbsp;errors&amp;nbsp;,&amp;nbsp;or&amp;nbsp;what&amp;nbsp;is&amp;nbsp;current&amp;nbsp;log&amp;nbsp;position&amp;nbsp;on&amp;nbsp;Master&lt;br&gt;
and&amp;nbsp;Slave&amp;nbsp;you&amp;nbsp;can&amp;nbsp;perform&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;SHOW&amp;nbsp;SLAVE&amp;nbsp;STATUS;&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
P.S.&amp;nbsp;If&amp;nbsp;there&amp;nbsp;are&amp;nbsp;errors&amp;nbsp;on&amp;nbsp;slave&amp;nbsp;,&amp;nbsp;you&amp;nbsp;need&amp;nbsp;to&amp;nbsp;'stop&amp;nbsp;slave',&amp;nbsp;perform&amp;nbsp;Step&amp;nbsp;6&amp;nbsp;(with&amp;nbsp;correct&amp;nbsp;MASTER_LOG_POS)&amp;nbsp;and&amp;nbsp;'start&amp;nbsp;slave'.&lt;br&gt;
MASTER_LOG_POS&amp;nbsp;-&amp;nbsp;it&amp;nbsp;is&amp;nbsp;just&amp;nbsp;snapshot&amp;nbsp;of&amp;nbsp;changes.&lt;br&gt;</questionanswer>
  </question>
</questions>
